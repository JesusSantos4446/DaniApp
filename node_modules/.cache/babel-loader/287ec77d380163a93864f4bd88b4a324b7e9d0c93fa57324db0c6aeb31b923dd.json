{"ast":null,"code":"// src/services/weather.js\nconst WMO = {\n  0: \"Despejado\",\n  1: \"Mayormente despejado\",\n  2: \"Parcialmente nublado\",\n  3: \"Nublado\",\n  45: \"Neblina\",\n  48: \"Neblina con escarcha\",\n  51: \"Llovizna ligera\",\n  53: \"Llovizna\",\n  55: \"Llovizna intensa\",\n  61: \"Lluvia ligera\",\n  63: \"Lluvia\",\n  65: \"Lluvia intensa\",\n  71: \"Nieve ligera\",\n  73: \"Nieve\",\n  75: \"Nieve intensa\",\n  80: \"Chubascos ligeros\",\n  81: \"Chubascos\",\n  82: \"Chubascos intensos\",\n  95: \"Tormenta\",\n  96: \"Tormenta con granizo\",\n  99: \"Tormenta fuerte con granizo\"\n};\nexport function iconFor(code, isNight) {\n  if ([0].includes(code)) return isNight ? \"ðŸŒ™\" : \"â˜€ï¸\";\n  if ([1, 2].includes(code)) return isNight ? \"ðŸŒ™\" : \"ðŸŒ¤ï¸\";\n  if ([3].includes(code)) return \"â˜ï¸\";\n  if ([45, 48].includes(code)) return \"ðŸŒ«ï¸\";\n  if ([51, 53, 55].includes(code)) return \"ðŸŒ¦ï¸\";\n  if ([61, 63, 65, 80, 81, 82].includes(code)) return \"ðŸŒ§ï¸\";\n  if ([71, 73, 75].includes(code)) return \"â„ï¸\";\n  if ([95, 96, 99].includes(code)) return \"â›ˆï¸\";\n  return \"â”\";\n}\n\n// Horaria: temp, cÃ³digo, % lluvia\nexport async function fetchHourlyWeather({\n  latitude,\n  longitude,\n  timezone = \"auto\"\n}) {\n  var _data$hourly, _data$hourly2, _data$hourly3, _data$hourly4;\n  const url = `https://api.open-meteo.com/v1/forecast` + `?latitude=${latitude}&longitude=${longitude}` + `&hourly=temperature_2m,weather_code,precipitation_probability` + `&forecast_days=1&timezone=${timezone}`;\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(\"Failed to fetch weather\");\n  const data = await res.json();\n  const t = (data === null || data === void 0 ? void 0 : (_data$hourly = data.hourly) === null || _data$hourly === void 0 ? void 0 : _data$hourly.time) || [];\n  const temp = (data === null || data === void 0 ? void 0 : (_data$hourly2 = data.hourly) === null || _data$hourly2 === void 0 ? void 0 : _data$hourly2.temperature_2m) || [];\n  const code = (data === null || data === void 0 ? void 0 : (_data$hourly3 = data.hourly) === null || _data$hourly3 === void 0 ? void 0 : _data$hourly3.weather_code) || [];\n  const pop = (data === null || data === void 0 ? void 0 : (_data$hourly4 = data.hourly) === null || _data$hourly4 === void 0 ? void 0 : _data$hourly4.precipitation_probability) || [];\n  return t.map((iso, i) => {\n    var _pop$i;\n    return {\n      iso,\n      temp: temp[i],\n      code: code[i],\n      pop: (_pop$i = pop[i]) !== null && _pop$i !== void 0 ? _pop$i : 0\n    };\n  });\n}\n\n// Actual\nexport async function fetchCurrentWeather({\n  latitude,\n  longitude,\n  timezone = \"auto\"\n}) {\n  const url = `https://api.open-meteo.com/v1/forecast` + `?latitude=${latitude}&longitude=${longitude}` + `&current=temperature_2m,apparent_temperature,weather_code,relative_humidity_2m,wind_speed_10m,is_day` + `&timezone=${timezone}`;\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(\"Failed to fetch current weather\");\n  const data = await res.json();\n  const c = data.current || {};\n  return {\n    temperature: c.temperature_2m,\n    feels_like: c.apparent_temperature,\n    weather_code: c.weather_code,\n    weather_text: WMO[c.weather_code] || \"â€”\",\n    humidity: c.relative_humidity_2m,\n    wind_kmh: c.wind_speed_10m,\n    is_day: !!c.is_day\n  };\n}\n\n// BÃºsqueda\nexport async function searchCities(query, limit = 10) {\n  if (!query || query.trim().length < 2) return [];\n  const url = `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(query)}&count=${limit}&language=es&format=json`;\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(\"Failed to search cities\");\n  const data = await res.json();\n  return (data.results || []).map(r => ({\n    id: `${r.name}-${r.latitude}-${r.longitude}`,\n    name: r.name,\n    country: r.country,\n    admin1: r.admin1,\n    latitude: r.latitude,\n    longitude: r.longitude,\n    label: `${r.name}${r.admin1 ? \", \" + r.admin1 : \"\"}, ${r.country}`\n  }));\n}\nexport { WMO };","map":{"version":3,"names":["WMO","iconFor","code","isNight","includes","fetchHourlyWeather","latitude","longitude","timezone","_data$hourly","_data$hourly2","_data$hourly3","_data$hourly4","url","res","fetch","ok","Error","data","json","t","hourly","time","temp","temperature_2m","weather_code","pop","precipitation_probability","map","iso","i","_pop$i","fetchCurrentWeather","c","current","temperature","feels_like","apparent_temperature","weather_text","humidity","relative_humidity_2m","wind_kmh","wind_speed_10m","is_day","searchCities","query","limit","trim","length","encodeURIComponent","results","r","id","name","country","admin1","label"],"sources":["C:/Users/jesus/Documents/DaniProject/react-api-mini/src/services/weather.js"],"sourcesContent":["// src/services/weather.js\r\nconst WMO = {\r\n  0: \"Despejado\", 1: \"Mayormente despejado\", 2: \"Parcialmente nublado\", 3: \"Nublado\",\r\n  45: \"Neblina\", 48: \"Neblina con escarcha\",\r\n  51: \"Llovizna ligera\", 53: \"Llovizna\", 55: \"Llovizna intensa\",\r\n  61: \"Lluvia ligera\", 63: \"Lluvia\", 65: \"Lluvia intensa\",\r\n  71: \"Nieve ligera\", 73: \"Nieve\", 75: \"Nieve intensa\",\r\n  80: \"Chubascos ligeros\", 81: \"Chubascos\", 82: \"Chubascos intensos\",\r\n  95: \"Tormenta\", 96: \"Tormenta con granizo\", 99: \"Tormenta fuerte con granizo\"\r\n};\r\n\r\nexport function iconFor(code, isNight) {\r\n  if ([0].includes(code)) return isNight ? \"ðŸŒ™\" : \"â˜€ï¸\";\r\n  if ([1,2].includes(code)) return isNight ? \"ðŸŒ™\" : \"ðŸŒ¤ï¸\";\r\n  if ([3].includes(code)) return \"â˜ï¸\";\r\n  if ([45,48].includes(code)) return \"ðŸŒ«ï¸\";\r\n  if ([51,53,55].includes(code)) return \"ðŸŒ¦ï¸\";\r\n  if ([61,63,65,80,81,82].includes(code)) return \"ðŸŒ§ï¸\";\r\n  if ([71,73,75].includes(code)) return \"â„ï¸\";\r\n  if ([95,96,99].includes(code)) return \"â›ˆï¸\";\r\n  return \"â”\";\r\n}\r\n\r\n// Horaria: temp, cÃ³digo, % lluvia\r\nexport async function fetchHourlyWeather({ latitude, longitude, timezone = \"auto\" }) {\r\n  const url =\r\n    `https://api.open-meteo.com/v1/forecast` +\r\n    `?latitude=${latitude}&longitude=${longitude}` +\r\n    `&hourly=temperature_2m,weather_code,precipitation_probability` +\r\n    `&forecast_days=1&timezone=${timezone}`;\r\n  const res = await fetch(url);\r\n  if (!res.ok) throw new Error(\"Failed to fetch weather\");\r\n  const data = await res.json();\r\n\r\n  const t = data?.hourly?.time || [];\r\n  const temp = data?.hourly?.temperature_2m || [];\r\n  const code = data?.hourly?.weather_code || [];\r\n  const pop = data?.hourly?.precipitation_probability || [];\r\n\r\n  return t.map((iso, i) => ({\r\n    iso,\r\n    temp: temp[i],\r\n    code: code[i],\r\n    pop: pop[i] ?? 0\r\n  }));\r\n}\r\n\r\n// Actual\r\nexport async function fetchCurrentWeather({ latitude, longitude, timezone = \"auto\" }) {\r\n  const url =\r\n    `https://api.open-meteo.com/v1/forecast` +\r\n    `?latitude=${latitude}&longitude=${longitude}` +\r\n    `&current=temperature_2m,apparent_temperature,weather_code,relative_humidity_2m,wind_speed_10m,is_day` +\r\n    `&timezone=${timezone}`;\r\n  const res = await fetch(url);\r\n  if (!res.ok) throw new Error(\"Failed to fetch current weather\");\r\n  const data = await res.json();\r\n  const c = data.current || {};\r\n  return {\r\n    temperature: c.temperature_2m,\r\n    feels_like: c.apparent_temperature,\r\n    weather_code: c.weather_code,\r\n    weather_text: WMO[c.weather_code] || \"â€”\",\r\n    humidity: c.relative_humidity_2m,\r\n    wind_kmh: c.wind_speed_10m,\r\n    is_day: !!c.is_day\r\n  };\r\n}\r\n\r\n// BÃºsqueda\r\nexport async function searchCities(query, limit = 10) {\r\n  if (!query || query.trim().length < 2) return [];\r\n  const url = `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(query)}&count=${limit}&language=es&format=json`;\r\n  const res = await fetch(url);\r\n  if (!res.ok) throw new Error(\"Failed to search cities\");\r\n  const data = await res.json();\r\n  return (data.results || []).map(r => ({\r\n    id: `${r.name}-${r.latitude}-${r.longitude}`,\r\n    name: r.name,\r\n    country: r.country,\r\n    admin1: r.admin1,\r\n    latitude: r.latitude,\r\n    longitude: r.longitude,\r\n    label: `${r.name}${r.admin1 ? \", \" + r.admin1 : \"\"}, ${r.country}`\r\n  }));\r\n}\r\n\r\nexport { WMO };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}