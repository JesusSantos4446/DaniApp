{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jesus\\\\Documents\\\\DaniProject\\\\react-api-mini\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { ThemeProvider } from \"./context/ThemeContext\";\nimport Header from \"./components/Header\";\nimport WeatherList from \"./components/WeatherList\";\nimport CurrentCard from \"./components/CurrentCard\";\nimport { fetchCurrentWeather } from \"./services/weather\";\nimport { CITIES } from \"./components/CityPicker\";\nimport WeeklyForecast from \"./components/WeeklyForecast\";\n\n// nuevos componentes\nimport Login from \"./components/Login\";\nimport Home from \"./components/Home\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const [isLogged, setIsLogged] = useState(false);\n  const [view, setView] = useState(\"menu\"); // \"menu\" | \"clima\"\n\n  // üëâ nuevo: guardamos el usuario logueado (viene del JSON)\n  const [currentUser, setCurrentUser] = useState(null);\n  const [city, setCity] = useState(CITIES[1]);\n  const [current, setCurrent] = useState(null);\n\n  // solo pedimos el clima cuando:\n  //  - ya inici√≥ sesi√≥n\n  //  - y est√° en la vista \"clima\"\n  useEffect(() => {\n    if (!isLogged || view !== \"clima\") return;\n    let alive = true;\n    (async () => {\n      try {\n        const data = await fetchCurrentWeather(city);\n        if (alive) setCurrent(data);\n      } catch {\n        if (alive) setCurrent(null);\n      }\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [isLogged, view, city.latitude, city.longitude]);\n\n  // cuando el usuario elige una app en el men√∫\n  const handleSelectApp = app => {\n    if (app === \"clima\") {\n      setView(\"clima\");\n    } else if (app === \"app2\") {\n      window.open(\"https://ejemplo-app2.com\", \"_blank\");\n    } else if (app === \"app3\") {\n      window.open(\"https://ejemplo-app3.com\", \"_blank\");\n    } else if (app === \"app4\") {\n      window.open(\"https://ejemplo-app4.com\", \"_blank\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    children: [!isLogged && /*#__PURE__*/_jsxDEV(Login, {\n      onLogin: user => {\n        // user viene del JSON (foundUser)\n        setCurrentUser(user);\n        setIsLogged(true);\n        setView(\"menu\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), isLogged && view === \"menu\" && /*#__PURE__*/_jsxDEV(Home, {\n      onSelectApp: handleSelectApp\n      // si quieres usar el nombre en Home:\n      ,\n      user: currentUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this), isLogged && view === \"clima\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        city: city,\n        onCityChange: setCity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"container row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(CurrentCard, {\n            current: current\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginTop: 0\n            },\n            children: \"Hoy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(WeatherList, {\n            city: city\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(WeeklyForecast, {\n            city: city\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"de0ECP6sbIaTAlBUxn7HmSUa15o=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","ThemeProvider","Header","WeatherList","CurrentCard","fetchCurrentWeather","CITIES","WeeklyForecast","Login","Home","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","isLogged","setIsLogged","view","setView","currentUser","setCurrentUser","city","setCity","current","setCurrent","alive","data","latitude","longitude","handleSelectApp","app","window","open","children","onLogin","user","fileName","_jsxFileName","lineNumber","columnNumber","onSelectApp","onCityChange","className","style","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/jesus/Documents/DaniProject/react-api-mini/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { ThemeProvider } from \"./context/ThemeContext\";\nimport Header from \"./components/Header\";\nimport WeatherList from \"./components/WeatherList\";\nimport CurrentCard from \"./components/CurrentCard\";\nimport { fetchCurrentWeather } from \"./services/weather\";\nimport { CITIES } from \"./components/CityPicker\";\nimport WeeklyForecast from \"./components/WeeklyForecast\";\n\n// nuevos componentes\nimport Login from \"./components/Login\";\nimport Home from \"./components/Home\";\n\nexport default function App() {\n  const [isLogged, setIsLogged] = useState(false);\n  const [view, setView] = useState(\"menu\"); // \"menu\" | \"clima\"\n\n  // üëâ nuevo: guardamos el usuario logueado (viene del JSON)\n  const [currentUser, setCurrentUser] = useState(null);\n\n  const [city, setCity] = useState(CITIES[1]);\n  const [current, setCurrent] = useState(null);\n\n  // solo pedimos el clima cuando:\n  //  - ya inici√≥ sesi√≥n\n  //  - y est√° en la vista \"clima\"\n  useEffect(() => {\n    if (!isLogged || view !== \"clima\") return;\n\n    let alive = true;\n    (async () => {\n      try {\n        const data = await fetchCurrentWeather(city);\n        if (alive) setCurrent(data);\n      } catch {\n        if (alive) setCurrent(null);\n      }\n    })();\n\n    return () => {\n      alive = false;\n    };\n  }, [isLogged, view, city.latitude, city.longitude]);\n\n  // cuando el usuario elige una app en el men√∫\n  const handleSelectApp = (app) => {\n    if (app === \"clima\") {\n      setView(\"clima\");\n    } else if (app === \"app2\") {\n      window.open(\"https://ejemplo-app2.com\", \"_blank\");\n    } else if (app === \"app3\") {\n      window.open(\"https://ejemplo-app3.com\", \"_blank\");\n    } else if (app === \"app4\") {\n      window.open(\"https://ejemplo-app4.com\", \"_blank\");\n    }\n  };\n\n  return (\n    <ThemeProvider>\n      {/* 1Ô∏è‚É£ Si NO est√° logueado ‚Üí solo login */}\n      {!isLogged && (\n        <Login\n          onLogin={(user) => {\n            // user viene del JSON (foundUser)\n            setCurrentUser(user);\n            setIsLogged(true);\n            setView(\"menu\");\n          }}\n        />\n      )}\n\n      {/* 2Ô∏è‚É£ Logueado y en men√∫ ‚Üí 4 opciones */}\n      {isLogged && view === \"menu\" && (\n        <Home\n          onSelectApp={handleSelectApp}\n          // si quieres usar el nombre en Home:\n          user={currentUser}\n        />\n      )}\n\n      {/* 3Ô∏è‚É£ Logueado y en vista \"clima\" ‚Üí tu app de clima completa */}\n      {isLogged && view === \"clima\" && (\n        <>\n          <Header city={city} onCityChange={setCity} />\n\n          <main className=\"container row\">\n            <div className=\"card\">\n              <CurrentCard current={current} />\n            </div>\n\n            <div className=\"card\">\n              <h3 style={{ marginTop: 0 }}>Hoy</h3>\n              <WeatherList city={city} />\n            </div>\n\n            <div className=\"card\">\n              <WeeklyForecast city={city} />\n            </div>\n          </main>\n        </>\n      )}\n    </ThemeProvider>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}