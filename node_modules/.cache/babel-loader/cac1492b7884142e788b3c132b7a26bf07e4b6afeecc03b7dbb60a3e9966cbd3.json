{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{fetchDailyWeather}from\"../services/weather\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const iconFor=(code,isDay)=>{if([0].includes(code))return isDay?\"â˜€ï¸\":\"ðŸŒ™\";if([1,2].includes(code))return isDay?\"ðŸŒ¤ï¸\":\"ðŸŒ™â˜ï¸\";if([3].includes(code))return\"â˜ï¸\";if([45,48].includes(code))return\"ðŸŒ«ï¸\";if([61,63,65,80,81,82].includes(code))return\"ðŸŒ§ï¸\";if([95,96,99].includes(code))return\"â›ˆï¸\";return isDay?\"â˜€ï¸\":\"ðŸŒ™\";};const dayLabel=(iso,idx)=>{if(idx===0)return\"Hoy\";return new Date(iso).toLocaleDateString(\"es-ES\",{weekday:\"short\"});};export default function WeeklyForecastList(_ref){let{city}=_ref;const[days,setDays]=useState([]);const[loading,setLoading]=useState(true);const[err,setErr]=useState(null);useEffect(()=>{let alive=true;setLoading(true);setErr(null);(async()=>{try{const data=await fetchDailyWeather(city);if(alive)setDays(data.slice(0,7));}catch(e){if(alive)setErr((e===null||e===void 0?void 0:e.message)||\"Unknown error\");}finally{if(alive)setLoading(false);}})();return()=>{alive=false;};},[city.latitude,city.longitude]);if(loading)return null;if(err)return/*#__PURE__*/_jsxs(\"div\",{style:{color:\"crimson\"},children:[\"Error: \",err]});return/*#__PURE__*/_jsx(\"ul\",{className:\"week-list\",children:days.map((d,i)=>{var _d$precip;return/*#__PURE__*/_jsxs(\"li\",{className:\"week-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-day\",children:dayLabel(d.date,i)}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-rain\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"drop\",children:\"\\uD83D\\uDCA7\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"rain-text\",children:[(_d$precip=d.precip)!==null&&_d$precip!==void 0?_d$precip:0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-icons\",children:[/*#__PURE__*/_jsx(\"span\",{children:iconFor(d.code,true)}),/*#__PURE__*/_jsx(\"span\",{children:iconFor(d.code,false)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-temps\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"tmax\",children:[Math.round(d.max),\"\\xB0\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"tmin\",children:[Math.round(d.min),\"\\xB0\"]})]})]},d.date);})});}","map":{"version":3,"names":["React","useEffect","useState","fetchDailyWeather","jsxs","_jsxs","jsx","_jsx","iconFor","code","isDay","includes","dayLabel","iso","idx","Date","toLocaleDateString","weekday","WeeklyForecastList","_ref","city","days","setDays","loading","setLoading","err","setErr","alive","data","slice","e","message","latitude","longitude","style","color","children","className","map","d","i","_d$precip","date","precip","Math","round","max","min"],"sources":["C:/Users/jesus/Documents/DaniProject/react-api-mini/src/components/WeeklyForecast.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { fetchDailyWeather } from \"../services/weather\";\r\n\r\nconst iconFor = (code, isDay) => {\r\n  if ([0].includes(code)) return isDay ? \"â˜€ï¸\" : \"ðŸŒ™\";\r\n  if ([1, 2].includes(code)) return isDay ? \"ðŸŒ¤ï¸\" : \"ðŸŒ™â˜ï¸\";\r\n  if ([3].includes(code)) return \"â˜ï¸\";\r\n  if ([45, 48].includes(code)) return \"ðŸŒ«ï¸\";\r\n  if ([61, 63, 65, 80, 81, 82].includes(code)) return \"ðŸŒ§ï¸\";\r\n  if ([95, 96, 99].includes(code)) return \"â›ˆï¸\";\r\n  return isDay ? \"â˜€ï¸\" : \"ðŸŒ™\";\r\n};\r\n\r\nconst dayLabel = (iso, idx) => {\r\n  if (idx === 0) return \"Hoy\";\r\n  return new Date(iso).toLocaleDateString(\"es-ES\", { weekday: \"short\" });\r\n};\r\n\r\nexport default function WeeklyForecastList({ city }) {\r\n  const [days, setDays] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n    setLoading(true);\r\n    setErr(null);\r\n    (async () => {\r\n      try {\r\n        const data = await fetchDailyWeather(city); \r\n        if (alive) setDays(data.slice(0, 7));\r\n      } catch (e) {\r\n        if (alive) setErr(e?.message || \"Unknown error\");\r\n      } finally {\r\n        if (alive) setLoading(false);\r\n      }\r\n    })();\r\n    return () => { alive = false; };\r\n  }, [city.latitude, city.longitude]);\r\n\r\n  if (loading) return null;\r\n  if (err) return <div style={{ color: \"crimson\" }}>Error: {err}</div>;\r\n\r\n  return (\r\n    <ul className=\"week-list\">\r\n      {days.map((d, i) => (\r\n        <li key={d.date} className=\"week-row\">\r\n          <div className=\"col-day\">{dayLabel(d.date, i)}</div>\r\n\r\n          <div className=\"col-rain\">\r\n            <span className=\"drop\">ðŸ’§</span>\r\n            <span className=\"rain-text\">{d.precip ?? 0}%</span>\r\n          </div>\r\n\r\n          <div className=\"col-icons\">\r\n            <span>{iconFor(d.code, true)}</span>\r\n            <span>{iconFor(d.code, false)}</span>\r\n          </div>\r\n\r\n          <div className=\"col-temps\">\r\n            <span className=\"tmax\">{Math.round(d.max)}Â°</span>\r\n            <span className=\"tmin\">{Math.round(d.min)}Â°</span>\r\n          </div>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}